<!DOCTYPE html>
<html lang='en'>
{% load socialaccount %}
{% load static %}

<head>
    <meta charset="UTF-8">
    <title>TaxonManager</title>
    <script src="https://use.fontawesome.com/baa70f3cd3.js"></script>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <script src="https://kit.fontawesome.com/5768ea2a16.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" href="{% static 'front/style.css' %}">

    {{ form.media.css }}
</head>

</head>

<body>
    <div class="main-container">
        <div class="header-container w3-container w3-theme">
            <div class="header w3-display-container">
                <div class="header-left w3-display-left">
                    <div class="w3-container">
                        <div class="header-button w3-left">
                            <i class="fa fa-bars w3-button w3-theme-b1 w3-hide-large w3-xlarge w3-bar-item"
                                onclick="w3_open()"></i>
                        </div>
                        <div class="w3-left">
                            <div class="w3-hide-medium w3-hide-small">
                                <img src="{% static "images/nowdatabase.jpg" %}" alt="now database" height="115" width="150" class="responsive" id="header_image">
                                <div id="image_credit_header">Picture_©_Noira_Martiskainen</div>
                                <h2 class="title-logo"><a href="/" id="welcome_header">Welcome</a></h2>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="header-right w3-display-right">
                    <div class="menu-item w3-display-container w3-hide-medium w3-hide-small">
                        <div class="menu-item-right w3-display-right">
                            <div class="header-button header-text-button">
                                {% if user.is_authenticated %}
                                <form method="post" action="{% url 'account_logout' %}">
                                    {% csrf_token %}
                                    {% if redirect_field_value %}
                                      <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}"/>
                                    {% endif %}
                                    <button class="w3-button w3-theme-b1" type="submit"><h4 class="logout-button" id="logoutButton">Logout</h4></button>
                                </form>
                                {% else %}
                                <a href="{% provider_login_url 'orcid' %}" class="w3-button w3-theme-b1">
                                    <h4 class="login-button" id="loginButton">Login</h4>
                                </a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="page-container w3-container">
            <div class="navigation list-item w3-theme-beige w3-sidebar w3-bar-block w3-collapse w3-animate-left w3-card"
                id="mySidebar">
                <div class="showMenu" id ="menuForSmallScreen">
                    <div class="w3-dropdown-hover w3-left">
                        <button class="w3-button w3-theme-b1">Menu</button>
                        <div class="w3-dropdown-content w3-bar-block w3-border" style="right:0">
                            {% if user.is_authenticated %}
                            <form method="post" action="{% url 'account_logout' %}">
                                {% csrf_token %}
                                {% if redirect_field_value %}
                                  <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}"/>
                                {% endif %}
                                <button class="w3-bar-item w3-button" type="submit" id="logoutButton">Logout</button>
                            </form>
                            {% else %}
                            <a href="{% provider_login_url 'orcid' %}" class="w3-bar-item w3-button" id="loginButton">Login</a>
                            {% endif %}
                        </div>
                    </div>
                    <br><br>
                    <br><br>
                </div>
                <h4 class="w3-bar-item" id="sideHeader">Features</h4>
                <table>
                    <tr><th>{% if user.is_authenticated %}
                        <a class="w3-bar-item w3-button" id="sideButton" href="/add-references"> Add reference </a>
                        {% else %}
                        <a class="w3-bar-item w3-button" id="sideButton_notAvailable" href="/add-references"> Add reference </a>
                        {% endif %}
                    </th>
                    </tr>
                    <tr><th><a class="w3-bar-item w3-button" id="sideButton" href="/references"> References </a></th></tr>
                    <tr><th><a class="w3-bar-item w3-button" id="sideButton" href="/"> Help </a></th></tr>
                    <tr><th> <div class="w3-hide-large image_text">
                        <img src="{% static "images/nowdatabase.jpg" %}" alt="now database" height="95" width="120" class="responsive">
                        <div id="image_credit">Picture © Noira Martiskainen</div>
                    </div></th></tr>
                </table>
            </div>
        </div>
        <div class="main-content w3-main">
            <div class="content w3-container">
                {% block content %}
                {% endblock %}
            </div>
        </div>
        <!-- Invisible overlay to close the side navigation -->
        <div class="close-nav w3-overlay w3-hide-large" onclick="w3_close()" id="myOverlay"></div>
        <footer class="w3-container w3-center w3-theme">
            <p>2022 - TaxonManager</p>
        </footer>
    </div>

    <!-- For opening and closing the sidebar -->
    <script>
        function w3_open() {
            document.getElementById("mySidebar").style.display = "block";
            document.getElementById("myOverlay").style.display = "block";
        }

        function w3_close() {
            document.getElementById("mySidebar").style.display = "none";
            document.getElementById("myOverlay").style.display = "none";
        }
    </script>
    </div>
</body>

</html>